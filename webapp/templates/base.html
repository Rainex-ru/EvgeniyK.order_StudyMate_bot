<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>StudyMate — Admin UI</title>
    <!-- SVG filters для эффекта преломления/искажения -->
    <svg xmlns="http://www.w3.org/2000/svg" style="position:absolute;width:0;height:0;">
      <filter id="turbulence">
  <!-- subtle turbulence for gentle liquid-glass refraction -->
  <feTurbulence baseFrequency="0.12" numOctaves="2" seed="2" result="noise"/>
  <feDisplacementMap in="SourceGraphic" in2="noise" scale="3" xChannelSelector="R" yChannelSelector="G"/>
      </filter>
    </svg>
  </head>
  <body>
    <div class="bg-animated">
      <div class="bg-layer layer1"></div>
      <div class="bg-layer layer2"></div>
      <div class="bg-layer layer3"></div>
      <div class="stars"></div>
      <div class="haze"></div>
      <div class="bg-noise"></div>
    </div>
    <nav class="navbar navbar-expand-lg navbar-dark nav-glass">
      <div class="container-fluid">
        <a class="navbar-brand" href="{{ url_for('students') }}">StudyMate</a>
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav ms-auto">
            {% if session.get('logged_in') %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('logout') }}">Выйти</a></li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>

  <main class="main-wrap">
      <div class="container">
        <div class="card glass p-4 shadow-sm">
          {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
              {% for category, msg in messages %}
                <div class="alert alert-{{ category }}">{{ msg }}</div>
              {% endfor %}
            {% endif %}
          {% endwith %}

          {% block content %}{% endblock %}
        </div>
      </div>
    </main>

    <footer class="text-center mt-4 footer-area">
      <div class="footer-main">StudyMate UI</div>
      <div class="footer-sub">discord &rarr; snowflake</div>
    </footer>

  </body>
</html>

<script>
// простой параллакс фон: двигаем слои в ответ на движение мыши
;(function(){
  const layers = document.querySelectorAll('.bg-animated .bg-layer');
  let mouseX = 0, mouseY = 0, rx = 0, ry = 0;

  function onMove(e){
    const rect = document.body.getBoundingClientRect();
    mouseX = (e.clientX - rect.left) / rect.width - 0.5;
    mouseY = (e.clientY - rect.top) / rect.height - 0.5;
  }

  window.addEventListener('mousemove', onMove);
  window.addEventListener('touchmove', function(e){ if(e.touches && e.touches[0]) onMove(e.touches[0]); }, {passive:true});

  function raf(){
    // сглаживание
    rx += (mouseX - rx) * 0.06;
    ry += (mouseY - ry) * 0.06;
    layers.forEach((el, i)=>{
      const depth = (i+1) / (layers.length+1);
      const tx = rx * 40 * depth; // смещение x
      const ty = ry * 30 * depth; // смещение y
      const rot = rx * 6 * depth;
      el.style.transform = `translate3d(${tx}px, ${ty}px, 0) rotate(${rot}deg)`;
    });
    requestAnimationFrame(raf);
  }
  requestAnimationFrame(raf);
})();
// генератор редких падающих звёзд (shooting stars) — остаётся на заднем фоне
(function(){
  const container = document.querySelector('.bg-animated');

  function shoot(){
    const s = document.createElement('div');
    s.className = 'shoot';
    // случайная стартовая позиция по ширине, вертикально в верхней части экрана
    const startX = 10 + Math.random()*80;
    const startY = 5 + Math.random()*40;
    s.style.left = startX + '%';
    s.style.top = startY + '%';
    container.appendChild(s);
    setTimeout(()=> s.remove(), 2600);
  }

  // редкие метеоры: от 12 до 30 секунд
  setInterval(shoot, 12000 + Math.random()*18000);
  // стартовый единичный запуск
  setTimeout(shoot, 2000);
})();
</script>
